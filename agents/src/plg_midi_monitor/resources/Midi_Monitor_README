Midi Monitor
RELEASE 0.0.1

Warning: this is a 'testing' release, things probably will change, so dont get upset if they do...
but id like to get it out there asap. (also the code needs a bit of cleaning)


Contributions
=============
Mark Harris - agent

Overview 
=========
An agent that uses lights to monitor various midi messages,
may be used for education (e.g. learning pieces), information 
or for creative uses
One of my primary purpoes for this agent is 'DAW integration and feedback, but think creatively.


most of all ENJOY !!!


Using
=========

a) connect midi monitor agent to a keygroup which you wish to use for scale and layout information.
this could be an existing 'playing' keygroup, or could be one created for this purpose alone

b) then connect it to a keygroup output, again... it could be an existing one (connected to a rig) or a new one.
connec this to  : controller input, light ouput 

c) now you need to connect a midi source, in eigenD the choices are from Midi Input agent (for external sources), Midi Converter (for internal)

d) configure midi monitor to either CC or notes mode, using the enable functions


Configuring agent
=================
This section details common ways of configuring agents,
(value in brackets, details default)

general
=======
controller input - connect to keygroup, used for layout, scale, octave, tonic, base note etc.
light output - used to light the LEDs
midi input - used for midi messages
channel (0) - filter on a midi channel,  0 all channels (no filter), N = only this channel

a) For midi note display
this is used to display midi notes
options required/recommended:
enable notes (true) = true, use musical mapping to light LEDS according to midi notes
use physical mapping (false) = false, use the musical mapping, and scale

options, to change behaviour:
velocity for status(true), use velocity of notes, determines colour
channel for status(false), use midi channel determines colours
(note: orange if neither of above options active)
close note(false) - used in non chromatic, if in C maj, receives C# with light D
first note(true) - only light the first note, not repetitions in other courses

b) CC display, one key per CC
options required/recommended:
enable control with key(false) = true - individual keys (of musical mapping) are used to represent a CC, coloured according to value
use physical mapping(false) = false, use the musical mapping for CC placement

options, to change behaviour:
close note(false) - used in non chromatic, if CC is not in musical scale, then use next key
control offset(0) - offset the CC number by this amount * see below

c) CC display using column
options required/recommended:
enable control with course(false) = true - a column (of physical layout) is used for CC
use physical mapping(false) = true, use the physical mapping for CC placement

options, to change behaviour:
control offset(0) - offset the CC number by this amount * see below

d) display poly pressure.
* this can be used with enable notes=true, if 
options required/recommended:
enable polyphonic pressure(false)  - on poly pressure, change LED colour
use physical mapping (false) = false, use the musical mapping, and scale

other options as enable notes =true


Configuring which CC to display
===============================
When displaying CC we can choose to either use the physical mapping or musical mapping, the recommendations for 'use physical mapping',
are to simpify using non mapped keygroups, but you can choose which ever you wish... 
physical mapping tends be simpler but slightly more setup, whilst musical allows you to play with 'dummy scales' to change positions around.

However, you have to aware that EigenD generally has a limitation, in that not the entire keygroup mapping is sent to downstream agents,
this is not normally an issue... however, it means that with have to assume 2 things:
columns, courses and rows are contigous i.e. 1,2,3,4,5 not 1,3,5
course/columns, need to start from 1
 
This does not cause issues when using the musical mapping, since the scale and course offsets, can jump aroud this issue, just make sure you have 
course 1,2,3,4 etc... 

but when we come to mapping CCs, thing become a bit trick, so there is the solution (it may later change):

displaying a range of CC for key mode 
create a mapping, that keys start from 1 (as normal) , and creates as many as CC you want.
set control offset to first CC, you want  eg. (e.g. if CC 5-10, create 5 keys numbered 1-5, then control_offset = 5

displaying a range of CC for column mode 
start your course/column from 1 (as normal) , 
add a control offset to where you want to start (e.g. if CC 5-10, create 5 columns numbered 1-5, then control_offset = 5

displaying a number of non sequential single CCs
use physical mapping
if your want to create 3 CC , they 1,7,8 
create a mapping for each CC, where column = CC num, and row = 1
e.g. [1,1] , [7,1], [8,1]

I know, the later 'breaks the rules', above, but thats because my explanation is simplfied, as reality is a bit more compex :)


Think creatively!!!
===================
for  CC mapping, remember you create create custom keygroups, with custom musical and physical mappings...
this means you dont have to display all CCs, or layout in strict numerical order
Also for the CC as column, it knowns the length of the column, and will adjust value and colour distribution accordingly
e.g. if you create only 4 rows high, then this will be 0,31,63,127 and each coloured differently)

In particular, the easy was to get specfic lighting, is to create a custom keygroup (or more than one) off the keyboard agent,
and then add specfic mappings to it to get what you want.    (my simple demo, just had the default mapping of all keys in one course)


Recommendations
===============
you can have as many midi monitors as you wish, all connected to the same inputs if you wish.
Id recommend the modes
enable notes (+ optionally enable poly pressure)
enable poly pressure
enable control with key
enable control with course

other combinations may have side effects ;) 



PLANNED ENHANCEMENTS
====================
Too many to list at this stage :) 




CHANGE HISTORY
==============

change log:
0.0.1 - initial release... a testing release
0.0.2 - useability release, make things a bit more meaningful in places


SETUPS
======
Below describes the setups available



Change Log
==========
0.0.2 - first match only defaults now to true (not false)
0.0.2 - notes and CC per key, all non zero values are now assigned colours (previous < 31 used to be off)
0.0.2 - colour consistent between cc course mode and key mode  (means note velocity has also altered)
0.0.2 - allow user to choose physical mapping OR musical mapping, default musical ... this changes behaviour or enable_cc_per_course
0.0.2 - allow user to offset CC number, default 0
0.0.2 - cc per course, when column length =1, then use 1 key CC colour mapping (e.g. as cc per key)
0.0.2 - fixed, channel as status

